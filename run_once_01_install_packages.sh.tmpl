#!/bin/bash


{{ if eq .chezmoi.os "darwin" }}

DOWNLOAD_DIR="$HOME/Downloads"
BREW_PATH="/opt/homebrew/bin"

/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

export PATH="$PATH:$BREW_PATH"

wget -P $DOWNLOAD_DIR -O iterm.zip https://iterm2.com/downloads/stable/latest
unzip $DOWNLOAD_DIR/iterm.zip -d /Applications
rm $DOWNLOAD_DIR/iterm.zip
curl -L https://iterm2.com/misc/install_shell_integration.sh | bash

{{ end }}

COMMAND_LIST=(vim nvim wget curl shellcheck coreutils git tmux)

{{ if eq .chezmoi.os "darwin" }}

brew install "${COMMAND_LIST[@]}"

{{ else if eq .chezmoi.os "linux" }}

COMMAND_LIST+=("zsh")
sudo apt update && sudo apt install -y "${COMMAND_LIST[@]}"

{{ end }}

git clone https://github.com/tmux-plugins/tpm ~/.local/share/tmux/plugins/tpm
git clone https://github.com/zdharma-continuum/zinit.git ~/.local/share/zinit/zinit.git
mkdir -p ~/.config/zsh
touch ~/.config/zsh/profile
curl https://mise.run | sh

chsh -s "$(which zsh)"
